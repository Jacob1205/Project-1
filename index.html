<!DOCTYPE html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CarVets | Welcome</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/foundation-sites@6.6.3/dist/css/foundation.min.css"
      integrity="sha256-ogmFxjqiTMnZhxCqVmcqTvjfe1Y/ec4WaRj/aQPvn+I="
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="style.css" />
    <script
      type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyD1SPf-ueMO6m5itNj_GSTabGu60sa7SeE"
    ></script>
  </head>

  <body>
    <div class="grid-container full">
      <div class="grid-x">
        <div class="callout primary cell auto">
          <h1 class="text-center">CarVets</h1>
          <p class="text-center">Slogan?</p>
        </div>
      </div>
      <div class="grid-x" style="height: 600px;">
        <div id="locationList" class="cell medium-2">
          <ul id="list"></ul>
        </div>
        <div id="mapArea" class="cell medium-10">
          <script>
            var map;
            var service;
            var infowindow;
            // pulls the users current location and inserts the map once the location is established
            if (navigator.geolocation) {
              navigator.geolocation.getCurrentPosition(showPosition);
              function showPosition(position) {
                lati = position.coords.latitude;
                long = position.coords.longitude;
                initMap();
              }
            }
            // inserts the map
            function initMap() {
              // centers map on user's current location
              var center = new google.maps.LatLng(lati, long);
              // creates the info windows in the map (popup windows that list location's name)
              infowindow = new google.maps.InfoWindow();
              // inserts the map in the div with the id mapArea, centers the map on the user location and sets the zoom level to 13
              map = new google.maps.Map(document.getElementById("mapArea"), {
                center: center,
                zoom: 13,
              });
              // sets up the places query
              var request = {
                location: center,
                radius: "8047",
                types: ["car_repair"],
              };
              // uses the query to search near the map location and adds markers to the results
              var service = new google.maps.places.PlacesService(map);
              service.nearbySearch(request, callback);
              // the function to add markers to all result locations
              function callback(results, status) {
                if (status == google.maps.places.PlacesServiceStatus.OK) {
                  for (var i = 0; i < results.length; i++) {
                    createMarker(results[i]);
                  }
                }
                // the function to create the markers and attach them to the infowindows
                function createMarker(place) {
                  var placeLoc = place.geometry.location;
                  var marker = new google.maps.Marker({
                    map: map,
                    position: place.geometry.location,
                  });
                  google.maps.event.addListener(marker, "click", function () {
                    infowindow.setContent(place.name);
                    infowindow.open(map, this);
                  });
                }
              }
            }
          </script>
          <!-- <div class="input-group searchbar">
            <div class="input-group-button">
              <button class="button search">
                <svg width="100" height="100" viewBox="0 0 100 100">
                  <path
                    fill="#FFF"
                    fill-rule="evenodd"
                    d="M42.117,12.246 C50.1209,12.246 57.797,15.4257 63.453,21.0858 C69.1132,26.742 72.2928,34.4178 72.2928,42.4218 C72.2928,50.4258 69.1131,58.1018 63.453,63.7578 C57.7968,69.418 50.121,72.5976 42.117,72.5976 C34.1131,72.5976 26.437,69.4179 20.781,63.7578 C15.1208,58.1016 11.9412,50.4258 11.9412,42.4218 C11.9412,34.4178 15.1209,26.7418 20.781,21.0858 C26.4372,15.4256 34.113,12.246 42.117,12.246 L42.117,12.246 Z M76.0828827,67.3362833 C82.3527829,58.7859894 85.2617455,48.0434678 83.9173,37.22271 C82.0618,22.28871 72.3743,9.47671 58.5153,3.61771 L58.51139,3.61771 C53.32389,1.41851 47.74139,0.28961 42.10539,0.29741 L42.117,0.305 C29.058,0.30891 16.742,6.3675 8.769001,16.707 C0.7924008,27.047 -1.933999,40.5 1.382301,53.129 C4.698701,65.758 13.6833,76.137 25.7103,81.223 L25.7103,81.22691 C39.5733,87.08631 55.5113,85.10191 67.5153,76.02771 C67.5852345,75.9748392 67.6549736,75.9217748 67.724517,75.8685177 L91.555,99.6990032 L100.0003,91.253703 L76.0828827,67.3362833 Z"
                  />
                </svg>
              </button>
            </div>
            <input
              class="input-field search-field"
              type="search"
              placeholder="Search for anything..."
            />
          </div> -->
          <div class="mapAnchor"></div>
        </div>
      </div>
      <div id="modalAnchor">
        <button id="modalTrigger" class="button">Test Modal Button</button>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-2.1.4.min.js "></script>
    <script
      src="https://cdn.jsdelivr.net/npm/foundation-sites@6.6.3/dist/js/foundation.min.js"
      integrity="sha256-pRF3zifJRA9jXGv++b06qwtSqX1byFQOLjqa2PTEb2o="
      crossorigin="anonymous"
    ></script>
    <!-- <script src="layoutLogic.js "></script> -->
    <!-- <script src="JSscript.js"></script> -->
    <script>
      $(document).foundation();
    </script>
  </body>
</html>
